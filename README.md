# Advanced Operating Systems: Assignment 1

## Overview

This repository is a solution for Assignment 1 of the Advanced Operating Systems (CS3.304) course. It consists of two C++ programs that demonstrate proficiency with low-level file I/O using system calls in a Unix-like environment.

- **Q1 (File Reverser):** A utility that reverses the contents of a file. It is designed to handle very large files efficiently and provides a real-time progress display.
- **Q2 (Output Validator):** A companion utility that verifies the output of the first program, checking for correctness of file reversal, file permissions, and directory permissions.

## Features

- **Large File Support:** Handles files larger than system RAM by processing them in chunks.
- **Two Reversal Modes:** Supports full file reversal and partial reversal of specific sections.
- **Dynamic Progress Display:** Shows a real-time, multi-line progress bar.
- **Strict Permission Control:** Creates output with secure, assignment-specified permissions.
- **System Call Adherence:** Uses only low-level system calls (e.g., `open`, `read`, `write`, `lseek`, `stat`, `mkdir`).
- **Comprehensive Validation:** Validates reversal correctness, file sizes, and permissions.

## Prerequisites

- A C++ compiler (`g++`)
- A Unix-like operating system (Linux, macOS)

## Compilation

```bash
# Compile the file reverser (Q1)
g++ 2024201067_A1_Q1.cpp -o q1

# Compile the output validator (Q2)
g++ 2024201067_A1_Q2.cpp -o q2
```

## Usage and Execution

### Question 1: File Reverser (q1)

Reverses file content based on the provided flag.

**Command Structure:**

```bash
./q1 <input_file_name> <flag> [start_index] [end_index]
```

**Arguments:**

- `<input_file_name>`: Path to the file to be reversed.
- `<flag>`:
  - `0`: Reverse the entire file.
  - `1`: Reverse parts of the file (requires `start_index` and `end_index`).
- `[start_index]` and `[end_index]`: Indices specifying the middle section to leave unchanged.

**Examples:**

- Full Reversal:

  ```bash
  ./q1 original.txt 0
  ```

  Output: `Assignment1/0_original.txt`

- Partial Reversal:

  ```bash
  ./q1 document.txt 1 100 500
  ```

  Output: `Assignment1/1_document.txt`

### Question 2: Output Validator (q2)

Validates the output generated by `q1`.

**Command Structure:**

```bash
./q2 <newfile_path> <oldfile_path> <directory_path>
```

**Arguments:**

- `<newfile_path>`: Path to the reversed file.
- `<oldfile_path>`: Path to the original file.
- `<directory_path>`: Output directory path (e.g., `Assignment1`).

**Example:**

```bash
./q2 Assignment1/0_original.txt original.txt Assignment1
```

Prints a detailed validation report on directory existence, content correctness, file size, and permissions.

## Implementation Details

- **File I/O:** Uses file descriptors and low-level system calls.
- **Large File Handling:** Reads input in reverse, chunk by chunk.
- **UI and Formatting:** Uses ANSI escape codes for dynamic and colored output.
